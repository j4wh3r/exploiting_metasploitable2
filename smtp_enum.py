import  socket
import sys
import os


def err_msg():
        print("Usage ./smtp-enum.py <ip> <wordlist>")
        exit(0)
if len(sys.argv) != 3:
        err_msg()

print("done")


ip = sys.argv[1]
port = 25

s = socket.socket(socket.AF_INET,socket.SOCK_STREAM)

connect = s.connect((ip,port))
banner = s.recv(1024)

if os.path.exists(sys.argv[2]):
        print(banner)
        f = open(sys.argv[2],"r")
        f.close()
else:
        err_msg()


# #TODO :change the wordlist, MAYBE !

cmd = "VRFY "

#users = ["root","toor","bin"]
#d = {}

# for i in users:
#         user = sys.argv[2]
#
#         data = cmd + i + '\r\n'
#
#         s.send(data.encode())
#         result = s.recv(1024).decode()
#         # TODO: add verification if the user exists or not
#         #d[i] = result[0:3]
#         #print(d)
#         print(result)